<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Task 3</title>
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="css/mdb.min.css" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="css/style.css" rel="stylesheet">
    <script src="js/script.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
  </head>
  <body>
<div class="container">
    <div class="sleeve">
      <div class="credit-card rotate" id="Rotate">
        <div class="card-company" id="card-company">Приват банк</div>
        <div class="card-number" id="card-number">
          <div class="digit-group"><span id="cardNumber1">**** **** **** ****</div>
        </div>
        <div class="card-expire text" id="card-expire">Expires <span id="date"> **</span>/<span id="year">**</span></div>
        <div class="card-holder" id="card-holder">***** *****</div>
        <div class="card-type text"><span id="cvv">CVV<span id="cvvCode">***</span></span><span id="imgCard"><img src="img/mastercard.png" height="35" id="mastercard"><img src="img/visa.png" height="35" id="visa"</span></div>
      </div>
    </div>
    <div class="sleeve2">
      <h5 class="font-weight-bold text-muted">Credit card detail</h5>
      <div class="line mb-3"></div>
      <div class="form-group">
        <div class="d-flex">
          <input type="text" class="form-control" id="cardNumberInput1" placeholder="Card Number" maxlength="16" onchange="validateNumber()">
        </div>
      </div>
      <p class="">Дата закінчення дії картки</p>
       <div class="d-flex ">
        <div class="form-group mr-5">
          <select class="form-control" id="dateInput" placeholder="Date" >
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            <option>6</option>
            <option>7</option>
            <option>8</option>
            <option>9</option>
            <option>10</option>
            <option>11</option>
            <option>12</option>
          </select>
        </div>
        <div class="form-group ml-3">
          <select class="form-control" id="yearInput" >
            <option>19</option>
            <option>20</option>
            <option>21</option>
            <option>22</option>
            <option>23</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <input type="text" class="form-control" id="cardOwnerInput" placeholder="Card Owner" maxlength="30" onchange="validateOwner()">
      </div>
      <div class="form-group">
        <input type="password" class="form-control" id="cardCVVInput" placeholder="CVV" maxlength="3" onchange="validateCVV()">
      </div>
      <button type="button" class="btn btn-success black-text text-weight-bold w-100" onclick="alert('В розробці =)')">Відправити дані на сервер</button>
    </div>
</div>
<script>
$('#cardNumberInput1').on('input', function() {
  var number1 = document.getElementById('cardNumberInput1').value;
  var visa = document.getElementById('visa');
  var mastercard = document.getElementById('mastercard');
  if (number1.match(/[а-я,А-я,a-z,A-z]/g)){
    alert("Введіть будьласка тільки цифри");
    $('#cardNumberInput1').val('');
    $('#cardNumber1').html('****');
  }
  else{
    document.getElementById('cardNumber1').innerHTML = number1.substr(0,4)  + " " + number1.substr(4,4) + " " + number1.substr(8,4) + " " + number1.substr(12,4);
  if (number1[0] == 4){
    visa.style.display = "inline";
    mastercard.style.display = "none";
  }
  else if (number1[0] == 5){
    mastercard.style.display = "inline";
    visa.style.display = "none";
  }
  else{
    mastercard.style.display = "none";
    visa.style.display = "none";
  }
  }
});
$('#dateInput').on('input', function() {
  var number1 = document.getElementById('dateInput').value;
  document.getElementById('date').innerHTML = number1;
});
$('#yearInput').on('input', function() {
  var number1 = document.getElementById('yearInput').value;
  document.getElementById('year').innerHTML = number1;
});
$('#cardOwnerInput').on('input', function() {
  var number3 = document.getElementById('cardOwnerInput').value;
  if (number3.match(/[0-9]/g)){
    alert("Введіть будь ласка тільки букви");
    $('#cardOwnerInput').val('');
  }  
  else{
  document.getElementById('card-holder').innerHTML = number3;
  }
});
//CVV
$('#cardCVVInput').on('input', function() {
  document.getElementById('card-number').style.display = 'none';
  document.getElementById('card-expire').style.display = 'none';
  document.getElementById('card-holder').style.display = 'none';
  document.getElementById('imgCard').style.display = 'none';
  document.getElementById('cvv').style.display = 'flex';
  document.getElementById('cvv').style.transform = 'scaleX(-1)';
  document.getElementById('card-company').style.transform = 'scaleX(-1)';
  document.getElementById('Rotate').style.transform = "rotateY(180deg)";
  document.getElementById('Rotate').style.transition  = "all 1.5s";
  var number = document.getElementById('cardCVVInput').value;
  if (number.match(/[а-я,А-я,a-z,A-z]/g)){
    alert("Введіть будь ласка тільки цифри");
    $('#cardCVVInput').val('');
  }  
  else{
  document.getElementById('cvvCode').innerHTML = "_" + number;
}
});

// function validateNumber(){
//   var number1 = document.getElementById('cardNumberInput1');
// }
function validateOwner(){
  var owner = document.getElementById('cardOwnerInput');
  if (owner.value.length < 4){
    alert("Введіть будь ласка достатню кількість букв");
    $('#cardOwnerInput').val('');
    $('#cardOwner').html('****');
  }
}
function validateCVV(){
  var owner = document.getElementById('cardCVVInput');
  document.getElementById('Rotate').style.transform = "rotateY(360deg)";
  document.getElementById('Rotate').style.transition  = "all 1.5s";
  document.getElementById('card-company').style.transform = 'scaleX(1)';
  document.getElementById('card-number').style.display = 'flex';
  document.getElementById('card-expire').style.display = 'flex';
  document.getElementById('card-holder').style.display = 'flex';
  document.getElementById('cvv').style.display = 'none';
  document.getElementById('imgCard').style.display = 'inline';
  if (owner.value.length < 3){
    $('#cardCVVInput').val('');
    $('#cvvCode').html('***');
  }
}
    </script>
  </body>
</html>
